<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 2: The Prime Directive - War Room Academy</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2563eb;
            --primary-dark: #1e40af;
            --secondary: #64748b;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --background: #f8fafc;
            --card-bg: #ffffff;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: var(--background);
            color: #1e293b;
            line-height: 1.7;
            font-size: 1.1rem;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
        }

        @media (min-width: 768px) {
            .container {
                padding: 3rem;
            }
        }

        .hero {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 3rem 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            text-align: center;
        }

        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .hero p {
            font-size: 1.2rem;
            opacity: 0.95;
            margin-bottom: 1rem;
        }

        .progress-indicator {
            display: inline-block;
            background: rgba(255, 255, 255, 0.2);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        h2 {
            color: var(--primary);
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
            font-weight: 700;
        }

        h3 {
            color: #334155;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            font-size: 1.3rem;
            font-weight: 600;
        }

        p {
            margin-bottom: 1rem;
        }

        ul {
            margin-bottom: 1.5rem;
            padding-left: 0;
            list-style: none;
        }

        li {
            padding-left: 1.5rem;
            position: relative;
            margin-bottom: 0.75rem;
        }

        li:before {
            content: "→";
            position: absolute;
            left: 0;
            color: var(--primary);
            font-weight: bold;
        }

        .prompt-box {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.95rem;
            margin-bottom: 1rem;
            position: relative;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .copy-button {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 600;
            transition: background 0.3s ease;
        }

        .copy-button:hover {
            background: var(--primary-dark);
        }

        .copy-button.copied {
            background: var(--success);
        }

        textarea {
            width: 100%;
            min-height: 120px;
            padding: 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-family: inherit;
            font-size: 1rem;
            margin-bottom: 1rem;
            resize: vertical;
            transition: border-color 0.3s ease;
        }

        textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        button:hover:not(:disabled) {
            background: var(--primary-dark);
            transform: translateY(-1px);
        }

        button:disabled {
            background: var(--secondary);
            cursor: not-allowed;
            opacity: 0.6;
        }

        .ai-response {
            background: #f1f5f9;
            border-left: 4px solid var(--primary);
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1rem;
            display: none;
        }

        .ai-response.loading {
            display: block;
        }

        .ai-response.visible {
            display: block;
        }

        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(37, 99, 235, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .char-counter {
            text-align: right;
            font-size: 0.9rem;
            color: var(--secondary);
            margin-top: 0.5rem;
        }

        .char-counter.valid {
            color: var(--success);
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 3rem;
            gap: 1rem;
        }

        .nav-button {
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-block;
        }

        .nav-button.back {
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .nav-button.back:hover {
            background: var(--primary);
            color: white;
        }

        .nav-button.next {
            background: var(--primary);
            color: white;
        }

        .nav-button.next:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
        }

        .nav-button:disabled {
            background: var(--secondary);
            color: white;
            border-color: var(--secondary);
            cursor: not-allowed;
            opacity: 0.6;
        }

        .directive-box {
            background: #f0f9ff;
            border: 2px solid var(--primary);
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            text-align: center;
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-dark);
        }

        .warning-box {
            background: #fef3c7;
            border-left: 4px solid var(--warning);
            padding: 1rem;
            border-radius: 8px;
            margin: 1.5rem 0;
        }

        .warning-box strong {
            color: #92400e;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="hero">
            <h1>Lesson 2: The Prime Directive</h1>
            <p>AI generates. You execute. You document. Reality decides.</p>
            <div class="progress-indicator">Module 1 • Lesson 2 of 4</div>
        </div>

        <div class="card">
            <h2>The Foundational Rule</h2>
            <p>The War Room system operates on one unbreakable rule. Everything else—every mode, every technique, every workflow—derives from this single directive:</p>

            <div class="directive-box">
                AI generates. You execute. You document. Reality decides.
            </div>

            <p>This is not philosophy. It's operational discipline. The AI generates possibilities. You execute what it suggests. You document what happened. Reality determines if it worked. No skipped steps. No exceptions.</p>

            <h3>Why This Matters</h3>
            <p>Most AI users stop at generation. They get output, say "that's useful," and move on. They never execute. They never test against reality. This creates the illusion of progress without actual results.</p>

            <p>War Room operators complete the loop. Generation without execution is theory. Execution without documentation is chaos. Documentation without reality-testing is delusion. All four steps happen, or you're not operating—you're browsing.</p>

            <h3>The Four Steps</h3>
            <ul>
                <li><strong>AI Generates:</strong> The system produces options, frameworks, strategies based on your prompts. It's fast, creative, and has no attachment to any single answer.</li>
                <li><strong>You Execute:</strong> You take one option and test it in the real world. Real customers. Real budget. Real constraints. No "I'll try this later."</li>
                <li><strong>You Document:</strong> You record what you did, what happened, and what you learned. Not feelings—data. Results. Failures. Proof.</li>
                <li><strong>Reality Decides:</strong> The market, your customers, your metrics tell you if it worked. Not the AI. Not your intuition. Reality is the only judge.</li>
            </ul>

            <div class="warning-box">
                <strong>War Room Rule:</strong> If you didn't document it, you didn't learn from it. If you didn't execute it, you didn't test it. If reality didn't judge it, you don't know if it works.
            </div>
        </div>

        <div class="card">
            <h2>Interactive Exercise</h2>
            <p>Apply the Prime Directive to a real problem. Copy this prompt and execute it with the AI:</p>

            <div class="prompt-box" id="promptBox">I need to acquire 10 new customers in the next 30 days. I have $500 budget and 10 hours per week. I can't code and I'm uncomfortable with cold calling. Give me 3 customer acquisition tactics I can execute this week, with expected cost and time per tactic.</div>
            <button class="copy-button" onclick="copyPrompt()">Copy Prompt</button>

            <h3>Test the Directive</h3>
            <textarea id="chatInput" placeholder="Paste the prompt here and get AI-generated tactics..."></textarea>
            <button onclick="sendToAI()">Send to AI</button>

            <div id="aiResponse" class="ai-response"></div>

            <p style="margin-top: 1.5rem;"><strong>After you get the AI's response:</strong> Pick ONE tactic. Commit to executing it this week. Document what happens. Reality will decide if it works.</p>
        </div>

        <div class="card">
            <h2>Checkpoint</h2>
            <p><strong>Which of the 4 steps do you skip most often, and what will you do differently?</strong></p>
            <p>Be honest. Most people skip execution or documentation. Identify your weak point and commit to fixing it.</p>

            <textarea id="checkpointAnswer" placeholder="Example: I skip documentation. I generate ideas and sometimes execute, but I never write down what happened. Starting today, I'll keep a simple log: date, what I tried, result. One sentence per test."></textarea>
            <div class="char-counter" id="charCounter">0 / 20 characters minimum</div>
            <button id="continueBtn" onclick="completeLesson()" disabled>Continue to Lesson 3 →</button>
        </div>

        <div class="navigation">
            <a href="index.html" class="nav-button back">← Back to Module 1</a>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        // Check lesson access
        checkAccess(2);

        // Copy prompt functionality
        function copyPrompt() {
            const promptText = document.getElementById('promptBox').textContent;
            navigator.clipboard.writeText(promptText);

            const button = document.querySelector('.copy-button');
            button.textContent = 'Copied!';
            button.classList.add('copied');

            document.getElementById('chatInput').value = promptText;

            setTimeout(() => {
                button.textContent = 'Copy Prompt';
                button.classList.remove('copied');
            }, 2000);
        }

        // Send to AI functionality
        async function sendToAI() {
            const input = document.getElementById('chatInput').value.trim();
            const responseDiv = document.getElementById('aiResponse');

            if (!input) {
                alert('Please enter a prompt first');
                return;
            }

            responseDiv.className = 'ai-response loading';
            responseDiv.innerHTML = '<div class="loading-spinner"></div> AI is thinking...';

            try {
                const response = await fetch(CONFIG.WORKER_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        prompt: input,
                        system: 'You are a helpful AI assistant.'
                    })
                });

                const data = await response.json();

                if (response.ok) {
                    responseDiv.className = 'ai-response visible';
                    responseDiv.innerHTML = `<strong>AI Response:</strong><br><br>${data.response}`;
                } else {
                    responseDiv.className = 'ai-response visible';
                    responseDiv.innerHTML = `<strong>Error:</strong> ${data.error || 'Failed to get response'}`;
                }
            } catch (error) {
                responseDiv.className = 'ai-response visible';
                responseDiv.innerHTML = `<strong>Error:</strong> ${error.message}`;
            }
        }

        // Checkpoint validation
        const checkpointAnswer = document.getElementById('checkpointAnswer');
        const charCounter = document.getElementById('charCounter');
        const continueBtn = document.getElementById('continueBtn');

        checkpointAnswer.addEventListener('input', function() {
            const length = this.value.trim().length;
            charCounter.textContent = `${length} / 20 characters minimum`;

            if (length >= 20) {
                charCounter.classList.add('valid');
                continueBtn.disabled = false;
            } else {
                charCounter.classList.remove('valid');
                continueBtn.disabled = true;
            }
        });

        function completeLesson() {
            const answer = checkpointAnswer.value.trim();

            if (answer.length >= 20) {
                // Save answer to localStorage
                const answers = JSON.parse(localStorage.getItem('warRoomAnswers') || '{}');
                answers.lesson2 = answer;
                localStorage.setItem('warRoomAnswers', JSON.stringify(answers));

                // Mark lesson complete
                saveProgress(2);

                // Redirect to next lesson
                window.location.href = 'lesson-3.html';
            }
        }

        // Load saved answer if exists
        window.addEventListener('DOMContentLoaded', function() {
            const answers = JSON.parse(localStorage.getItem('warRoomAnswers') || '{}');
            if (answers.lesson2) {
                checkpointAnswer.value = answers.lesson2;
                checkpointAnswer.dispatchEvent(new Event('input'));
            }
        });
    </script>
</body>
</html>